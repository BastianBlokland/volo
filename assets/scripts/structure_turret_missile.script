
var me = self()

if(!exists($user_attack_target)) {
  $user_attack_target = null
}

var target = $user_attack_target ?? target_primary(me)
if(health(target) > 0) {
  var dist = distance(position(target), position(me))
  if(dist >= target_range_min(me) && dist <= target_range_max(me)) {
    attack(me, target)
  }
}
